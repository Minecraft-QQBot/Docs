name: pushè‡ªåŠ¨æ›´æ–°

on:
  push:
    branches:
      - main

env: # è®¾ç½®ç¯å¢ƒå˜é‡
  TZ: Asia/Shanghai # æ—¶åŒºï¼ˆè®¾ç½®æ—¶åŒºå¯ä½¿é¡µé¢ä¸­çš„`æœ€è¿‘æ›´æ–°æ—¶é—´`ä½¿ç”¨æ—¶åŒºæ—¶é—´ï¼‰

jobs:
  build: # è‡ªå®šä¹‰åç§°
    runs-on: ubuntu-latest
    steps:
      - name: ğŸš€ æ£€æŸ¥ä»£ç 
        uses: actions/checkout@v2

      - name: ğŸ§ é…ç½®ç¯å¢ƒ
        uses: actions/setup-node@v2
        with:
          node-version: "20"

      - name: ğŸ› ï¸ æ‰“åŒ…é™æ€æ–‡ä»¶
        run: |
          npm install
          npm run docs:build

      - name: ğŸš éƒ¨ç½²åˆ°æœåŠ¡å™¨
        uses: easingthemes/ssh-deploy@v2.1.5
        with:
          # æœåŠ¡å™¨åœ°å€
          ssh-hostname: ${{ secrets.SSH_HOST }}
          # æœåŠ¡å™¨ç«¯å£
          ssh-port: 22
          # æœåŠ¡å™¨ç”¨æˆ·å
          ssh-username: ${{ secrets.SSH_USERNAME }}
          # æœåŠ¡å™¨å¯†ç æˆ–ç§é’¥
          ssh-key: ${{ secrets.SSH_PRIVATE_KEY }}
          # è¦éƒ¨ç½²çš„ç›®å½•
          remote-dir: ${{ secrets.WEB_PATH }}
          # è¦éƒ¨ç½²çš„æ–‡ä»¶æˆ–ç›®å½•
          file-glob: "**/*"
          # æ’é™¤çš„æ–‡ä»¶æˆ–ç›®å½•
          exclude-file: ".gitignore"
          # å‹ç¼©æ–‡ä»¶
          compression: none
          # éƒ¨ç½²å‰æ¸…ç©ºè¿œç¨‹ç›®å½•
          delete-files: true
