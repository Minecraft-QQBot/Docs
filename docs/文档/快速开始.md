# Minecraft_QQBot

**一款基于 Nonebot2 用多种方式与 Minecraft 交互的 Python QQ 机器人**。功能丰富，使用简单且可以自行配置，仅需简单配置即可使用。我们已实现的功能有：

- 多服互联：支持多个 Minecraft 服务器互相连接，可共享所有服务器内消息。
- 群服互通：可通过指令简单操作所有连接的服务器，可将服务器内消息同步到 QQ 群，也可把 QQ 群消息转发给服务器。
- 高度自制：可通过 WebUi 简单配置机器人，提供多个选项供用户选择。
- 指令交互：支持丰富的指令，包括查看自动绑定白名单、发送指令、查询服内玩家、查询服务器占用等等功能。
- 娱乐功能：戳一戳机器人会发送一言卡片，可随机获取一句诗词，还有查看今日运势。

欢迎到 Github 提交 Issues 提出你宝贵的建议，更多功能还在探索中……

如若你打算安装此机器人，请按照如下步骤安装。

## 搭建环境

由于本机器人依赖于 Python 语言，所以请先到 [Python 官网](https://www.python.org/downloads/) 下载安装。请注意，此机器人**仅支持 Python 3.8 及以上**版本，若版本过低，否则可能会出现不可预知的错误。

安装完毕 Python 后，你可以使用 `pip3 -V` 确认 Python 是否安装正确以及版本是否符合要求。确认完毕后，请在命令行输入如下指令安装此机器人所需的依赖库：

```bash
pip3 install "nonebot2[fastapi]>=2.3.1"
pip3 install "nonebot-adapter-onebot>=2.4.3"
pip3 install "requests>=2.32.3"
pip3 install "matplotlib>=3.9.1"
```

> [!TIP]
> 如若出现报错，你可以尝试输入以下指令使用清华镜像源来加快安装的速度。
> ```bash
> pip3 config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
> ```

### 安装平台

为了与 QQ 交互，你需要安装 Onebot 协议的实现平台，例如 NapCat、LLOneBot、Mirai 等。在此文档中，我们以 NapCat 为例，你可以根据自己的需求安装其他平台。

请前往 NapCat 的 [官方网站](https://napneko.github.io/zh-CN/) 根据文档安装。安装完成后，你需要对 NapCat 进行配置，此文档中仅解释与本机器人有关的参数，其他的请自行探索。

在此文档中仅展示 WebSocket 反向链接一种连接方式，更多的连接方式请自行探索。

## 安装核心

环境搭建完毕后，请前往 Github 下载机器人核心 BotServer 项目。你可以在 [Releases](https://github.com/Minecraft-QQBot/BotServer/releases) 下载最新的版本，下载完成后解压到任意目录。

双击解压后文件夹下的 `Start.bat` 启动机器人核心。如果你在控制台看到类似

```log
05-25 19:49:08 [INFO] WebUi http://host:port/webui?token=********
```

的输出，说明机器人核心启动成功，在浏览器内打开这个链接，你就可以使用 WebUi 进行配置。

此外，你也可以直接手动编辑 `.env` 文件来配置机器人。对于新手，建议使用 WebUi 来配置。

> [!WARNING]
> 第一次使用 WebUi 有可能会请求失败，请尝试多刷新几次页面。

## 配置平台

配置完机器人核心后，你需要对 NapCat 进行配置使其连接上机器人核心。

你需要在 NapCat 的设置中开启 WebSocket 反向链接，并添加一个 Ws 连接地址。将此地址设置为 `ws://{host}:{port}/onebot/v11`，请注意，其中的 `{host}` 和 `{port}` 需要替换为你的机器人核心的实际地址。即机器人核心的 HOST 和 PORT 参数。

如果 NapCat 的控制台中不再出现类似 `连接断开` 的提示，说明配置成功，返回到 BotServer 查看日志，如若出现类似如下的日志，说明你的机器人已经成功的与 QQ 平台连接。

```log
05-25 19:49:08 [INFO] nonebot | OneBot V11 | Bot 2********6 connected
```

## 安装插件

对于插件的安装，请到 [这里](/)
